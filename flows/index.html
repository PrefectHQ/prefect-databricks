
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://PrefectHQ.github.io/prefect-databricks/flows/">
      
      
        <link rel="prev" href="../rest/">
      
      
        <link rel="next" href="../models/jobs/">
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>Flows - prefect-databricks</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bd3936ea.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-8CSMBCQDKN"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-8CSMBCQDKN",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-8CSMBCQDKN",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prefect_databricks.flows" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="prefect-databricks" class="md-header__button md-logo" aria-label="prefect-databricks" data-md-component="logo">
      
  <img src="../img/prefect-logo-mark-solid-white-500.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            prefect-databricks
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Flows
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_3" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_3">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/PrefectHQ/prefect-databricks" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="prefect-databricks" class="md-nav__button md-logo" aria-label="prefect-databricks" data-md-component="logo">
      
  <img src="../img/prefect-logo-mark-solid-white-500.png" alt="logo">

    </a>
    prefect-databricks
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/PrefectHQ/prefect-databricks" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../blocks_catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blocks Catalog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../examples_catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples Catalog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../credentials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credentials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../rest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Flows
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Flows
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prefect_databricks.flows-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.DatabricksJobInternalError" class="md-nav__link">
    DatabricksJobInternalError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.DatabricksJobRunTimedOut" class="md-nav__link">
    DatabricksJobRunTimedOut
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.DatabricksJobSkipped" class="md-nav__link">
    DatabricksJobSkipped
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.DatabricksJobTerminated" class="md-nav__link">
    DatabricksJobTerminated
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prefect_databricks.flows-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.jobs_runs_submit_and_wait_for_completion" class="md-nav__link">
    jobs_runs_submit_and_wait_for_completion()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.jobs_runs_submit_by_id_and_wait_for_completion" class="md-nav__link">
    jobs_runs_submit_by_id_and_wait_for_completion()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.jobs_runs_wait_for_completion" class="md-nav__link">
    jobs_runs_wait_for_completion()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../models/jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jobs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prefect_databricks.flows-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.DatabricksJobInternalError" class="md-nav__link">
    DatabricksJobInternalError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.DatabricksJobRunTimedOut" class="md-nav__link">
    DatabricksJobRunTimedOut
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.DatabricksJobSkipped" class="md-nav__link">
    DatabricksJobSkipped
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.DatabricksJobTerminated" class="md-nav__link">
    DatabricksJobTerminated
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prefect_databricks.flows-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.jobs_runs_submit_and_wait_for_completion" class="md-nav__link">
    jobs_runs_submit_and_wait_for_completion()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.jobs_runs_submit_by_id_and_wait_for_completion" class="md-nav__link">
    jobs_runs_submit_by_id_and_wait_for_completion()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prefect_databricks.flows.jobs_runs_wait_for_completion" class="md-nav__link">
    jobs_runs_wait_for_completion()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div class="doc doc-object doc-module">




<h1 id="prefect_databricks.flows" class="doc doc-heading">
          <code>prefect_databricks.flows</code>


</h1>

  <div class="doc doc-contents first">
  
      <p>Module containing flows for interacting with Databricks</p>

  

  <div class="doc doc-children">






<h2 id="prefect_databricks.flows-classes">Classes</h2>

<div class="doc doc-object doc-class">




<h3 id="prefect_databricks.flows.DatabricksJobInternalError" class="doc doc-heading">
          <code>DatabricksJobInternalError</code>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code>Exception</code></p>

  
      <p>Raised when Databricks jobs runs submit encounters internal error</p>

            <details class="quote">
              <summary>Source code in <code>prefect_databricks/flows.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksJobInternalError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when Databricks jobs runs submit encounters internal error&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>

</div>

<div class="doc doc-object doc-class">




<h3 id="prefect_databricks.flows.DatabricksJobRunTimedOut" class="doc doc-heading">
          <code>DatabricksJobRunTimedOut</code>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code>Exception</code></p>

  
      <p>Raised when Databricks jobs runs does not complete in the configured max
wait seconds</p>

            <details class="quote">
              <summary>Source code in <code>prefect_databricks/flows.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksJobRunTimedOut</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Raised when Databricks jobs runs does not complete in the configured max</span>
<span class="sd">    wait seconds</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>

</div>

<div class="doc doc-object doc-class">




<h3 id="prefect_databricks.flows.DatabricksJobSkipped" class="doc doc-heading">
          <code>DatabricksJobSkipped</code>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code>Exception</code></p>

  
      <p>Raised when Databricks jobs runs submit skips</p>

            <details class="quote">
              <summary>Source code in <code>prefect_databricks/flows.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksJobSkipped</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when Databricks jobs runs submit skips&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>

</div>

<div class="doc doc-object doc-class">




<h3 id="prefect_databricks.flows.DatabricksJobTerminated" class="doc doc-heading">
          <code>DatabricksJobTerminated</code>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code>Exception</code></p>

  
      <p>Raised when Databricks jobs runs submit terminates</p>

            <details class="quote">
              <summary>Source code in <code>prefect_databricks/flows.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksJobTerminated</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when Databricks jobs runs submit terminates&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>

</div>
<h2 id="prefect_databricks.flows-functions">Functions</h2>


<div class="doc doc-object doc-function">




<h3 id="prefect_databricks.flows.jobs_runs_submit_and_wait_for_completion" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">jobs_runs_submit_and_wait_for_completion</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Flow that triggers a job run and waits for the triggered run to complete.
Args:
    databricks_credentials:
        Credentials to use for authentication with Databricks.
    tasks: Tasks to run, e.g.
        <div class="highlight"><pre><span></span><code>[
    {
        &quot;task_key&quot;: &quot;Sessionize&quot;,
        &quot;description&quot;: &quot;Extracts session data from events&quot;,
        &quot;depends_on&quot;: [],
        &quot;existing_cluster_id&quot;: &quot;0923-164208-meows279&quot;,
        &quot;spark_jar_task&quot;: {
            &quot;main_class_name&quot;: &quot;com.databricks.Sessionize&quot;,
            &quot;parameters&quot;: [&quot;--data&quot;, &quot;dbfs:/path/to/data.json&quot;],
        },
        &quot;libraries&quot;: [{&quot;jar&quot;: &quot;dbfs:/mnt/databricks/Sessionize.jar&quot;}],
        &quot;timeout_seconds&quot;: 86400,
    },
    {
        &quot;task_key&quot;: &quot;Orders_Ingest&quot;,
        &quot;description&quot;: &quot;Ingests order data&quot;,
        &quot;depends_on&quot;: [],
        &quot;existing_cluster_id&quot;: &quot;0923-164208-meows279&quot;,
        &quot;spark_jar_task&quot;: {
            &quot;main_class_name&quot;: &quot;com.databricks.OrdersIngest&quot;,
            &quot;parameters&quot;: [&quot;--data&quot;, &quot;dbfs:/path/to/order-data.json&quot;],
        },
        &quot;libraries&quot;: [{&quot;jar&quot;: &quot;dbfs:/mnt/databricks/OrderIngest.jar&quot;}],
        &quot;timeout_seconds&quot;: 86400,
    },
    {
        &quot;task_key&quot;: &quot;Match&quot;,
        &quot;description&quot;: &quot;Matches orders with user sessions&quot;,
        &quot;depends_on&quot;: [
            {&quot;task_key&quot;: &quot;Orders_Ingest&quot;},
            {&quot;task_key&quot;: &quot;Sessionize&quot;},
        ],
        &quot;new_cluster&quot;: {
            &quot;spark_version&quot;: &quot;7.3.x-scala2.12&quot;,
            &quot;node_type_id&quot;: &quot;i3.xlarge&quot;,
            &quot;spark_conf&quot;: {&quot;spark.speculation&quot;: True},
            &quot;aws_attributes&quot;: {
                &quot;availability&quot;: &quot;SPOT&quot;,
                &quot;zone_id&quot;: &quot;us-west-2a&quot;,
            },
            &quot;autoscale&quot;: {&quot;min_workers&quot;: 2, &quot;max_workers&quot;: 16},
        },
        &quot;notebook_task&quot;: {
            &quot;notebook_path&quot;: &quot;/Users/user.name@databricks.com/Match&quot;,
            &quot;base_parameters&quot;: {&quot;name&quot;: &quot;John Doe&quot;, &quot;age&quot;: &quot;35&quot;},
        },
        &quot;timeout_seconds&quot;: 86400,
    },
]
</code></pre></div>
    run_name:
        An optional name for the run. The default value is <code>Untitled</code>, e.g. <code>A
        multitask job run</code>.
    git_source:
        This functionality is in Public Preview.  An optional specification for
        a remote repository containing the notebooks used by this
        job's notebook tasks. Key-values:
        - git_url:
            URL of the repository to be cloned by this job. The maximum
            length is 300 characters, e.g.
            <code>https://github.com/databricks/databricks-cli</code>.
        - git_provider:
            Unique identifier of the service used to host the Git
            repository. The value is case insensitive, e.g. <code>github</code>.
        - git_branch:
            Name of the branch to be checked out and used by this job.
            This field cannot be specified in conjunction with git_tag
            or git_commit. The maximum length is 255 characters, e.g.
            <code>main</code>.
        - git_tag:
            Name of the tag to be checked out and used by this job. This
            field cannot be specified in conjunction with git_branch or
            git_commit. The maximum length is 255 characters, e.g.
            <code>release-1.0.0</code>.
        - git_commit:
            Commit to be checked out and used by this job. This field
            cannot be specified in conjunction with git_branch or
            git_tag. The maximum length is 64 characters, e.g.
            <code>e0056d01</code>.
        - git_snapshot:
            Read-only state of the remote repository at the time the job was run.
                        This field is only included on job runs.
    timeout_seconds:
        An optional timeout applied to each run of this job. The default
        behavior is to have no timeout, e.g. <code>86400</code>.
    idempotency_token:
        An optional token that can be used to guarantee the idempotency of job
        run requests. If a run with the provided token already
        exists, the request does not create a new run but returns
        the ID of the existing run instead. If a run with the
        provided token is deleted, an error is returned.  If you
        specify the idempotency token, upon failure you can retry
        until the request succeeds. Databricks guarantees that
        exactly one run is launched with that idempotency token.
        This token must have at most 64 characters.  For more
        information, see <a href="https://kb.databricks.com/jobs/jobs-idempotency.html">How to ensure idempotency for
        jobs</a>,
        e.g. <code>8f018174-4792-40d5-bcbc-3e6a527352c8</code>.
    access_control_list:
        List of permissions to set on the job.
    max_wait_seconds: Maximum number of seconds to wait for the entire flow to complete.
    poll_frequency_seconds: Number of seconds to wait in between checks for
        run completion.
    **jobs_runs_submit_kwargs: Additional keyword arguments to pass to <code>jobs_runs_submit</code>.
Returns:
    A dictionary of task keys to its corresponding notebook output.
Examples:
    Submit jobs runs and wait.
    <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="kn">from</span> <span class="nn">prefect_databricks</span> <span class="kn">import</span> <span class="n">DatabricksCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_databricks.flows</span> <span class="kn">import</span> <span class="n">jobs_runs_submit_and_wait_for_completion</span>
<span class="kn">from</span> <span class="nn">prefect_databricks.models.jobs</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AutoScale</span><span class="p">,</span>
    <span class="n">AwsAttributes</span><span class="p">,</span>
    <span class="n">JobTaskSettings</span><span class="p">,</span>
    <span class="n">NotebookTask</span><span class="p">,</span>
    <span class="n">NewCluster</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">jobs_runs_submit_and_wait_for_completion_flow</span><span class="p">(</span><span class="n">notebook_path</span><span class="p">,</span> <span class="o">**</span><span class="n">base_parameters</span><span class="p">):</span>
    <span class="n">databricks_credentials</span> <span class="o">=</span> <span class="k">await</span> <span class="n">DatabricksCredentials</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;BLOCK_NAME&quot;</span><span class="p">)</span>
    <span class="c1"># specify new cluster settings</span>
    <span class="n">aws_attributes</span> <span class="o">=</span> <span class="n">AwsAttributes</span><span class="p">(</span>
        <span class="n">availability</span><span class="o">=</span><span class="s2">&quot;SPOT&quot;</span><span class="p">,</span>
        <span class="n">zone_id</span><span class="o">=</span><span class="s2">&quot;us-west-2a&quot;</span><span class="p">,</span>
        <span class="n">ebs_volume_type</span><span class="o">=</span><span class="s2">&quot;GENERAL_PURPOSE_SSD&quot;</span><span class="p">,</span>
        <span class="n">ebs_volume_count</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">ebs_volume_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">auto_scale</span> <span class="o">=</span> <span class="n">AutoScale</span><span class="p">(</span><span class="n">min_workers</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_workers</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">new_cluster</span> <span class="o">=</span> <span class="n">NewCluster</span><span class="p">(</span>
        <span class="n">aws_attributes</span><span class="o">=</span><span class="n">aws_attributes</span><span class="p">,</span>
        <span class="n">autoscale</span><span class="o">=</span><span class="n">auto_scale</span><span class="p">,</span>
        <span class="n">node_type_id</span><span class="o">=</span><span class="s2">&quot;m4.large&quot;</span><span class="p">,</span>
        <span class="n">spark_version</span><span class="o">=</span><span class="s2">&quot;10.4.x-scala2.12&quot;</span><span class="p">,</span>
        <span class="n">spark_conf</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;spark.speculation&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="p">)</span>
    <span class="c1"># specify notebook to use and parameters to pass</span>
    <span class="n">notebook_task</span> <span class="o">=</span> <span class="n">NotebookTask</span><span class="p">(</span>
        <span class="n">notebook_path</span><span class="o">=</span><span class="n">notebook_path</span><span class="p">,</span>
        <span class="n">base_parameters</span><span class="o">=</span><span class="n">base_parameters</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># compile job task settings</span>
    <span class="n">job_task_settings</span> <span class="o">=</span> <span class="n">JobTaskSettings</span><span class="p">(</span>
        <span class="n">new_cluster</span><span class="o">=</span><span class="n">new_cluster</span><span class="p">,</span>
        <span class="n">notebook_task</span><span class="o">=</span><span class="n">notebook_task</span><span class="p">,</span>
        <span class="n">task_key</span><span class="o">=</span><span class="s2">&quot;prefect-task&quot;</span>
    <span class="p">)</span>
    <span class="n">multi_task_runs</span> <span class="o">=</span> <span class="n">jobs_runs_submit_and_wait_for_completion</span><span class="p">(</span>
        <span class="n">databricks_credentials</span><span class="o">=</span><span class="n">databricks_credentials</span><span class="p">,</span>
        <span class="n">run_name</span><span class="o">=</span><span class="s2">&quot;prefect-job&quot;</span><span class="p">,</span>
        <span class="n">tasks</span><span class="o">=</span><span class="p">[</span><span class="n">job_task_settings</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">multi_task_runs</span>
</code></pre></div></p>

          <details class="quote">
            <summary>Source code in <code>prefect_databricks/flows.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@flow</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Submit jobs runs and wait for completion&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;Triggers a Databricks jobs runs and waits for the &quot;</span>
        <span class="s2">&quot;triggered runs to complete.&quot;</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">jobs_runs_submit_and_wait_for_completion</span><span class="p">(</span>
    <span class="n">databricks_credentials</span><span class="p">:</span> <span class="n">DatabricksCredentials</span><span class="p">,</span>
    <span class="n">tasks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RunSubmitTaskSettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">run_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_wait_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">900</span><span class="p">,</span>
    <span class="n">poll_frequency_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">git_source</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">GitSource</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout_seconds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">idempotency_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">access_control_list</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AccessControlRequest</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">jobs_runs_submit_kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Flow that triggers a job run and waits for the triggered run to complete.</span>
<span class="sd">    Args:</span>
<span class="sd">        databricks_credentials:</span>
<span class="sd">            Credentials to use for authentication with Databricks.</span>
<span class="sd">        tasks: Tasks to run, e.g.</span>
<span class="sd">            ```</span>
<span class="sd">            [</span>
<span class="sd">                {</span>
<span class="sd">                    &quot;task_key&quot;: &quot;Sessionize&quot;,</span>
<span class="sd">                    &quot;description&quot;: &quot;Extracts session data from events&quot;,</span>
<span class="sd">                    &quot;depends_on&quot;: [],</span>
<span class="sd">                    &quot;existing_cluster_id&quot;: &quot;0923-164208-meows279&quot;,</span>
<span class="sd">                    &quot;spark_jar_task&quot;: {</span>
<span class="sd">                        &quot;main_class_name&quot;: &quot;com.databricks.Sessionize&quot;,</span>
<span class="sd">                        &quot;parameters&quot;: [&quot;--data&quot;, &quot;dbfs:/path/to/data.json&quot;],</span>
<span class="sd">                    },</span>
<span class="sd">                    &quot;libraries&quot;: [{&quot;jar&quot;: &quot;dbfs:/mnt/databricks/Sessionize.jar&quot;}],</span>
<span class="sd">                    &quot;timeout_seconds&quot;: 86400,</span>
<span class="sd">                },</span>
<span class="sd">                {</span>
<span class="sd">                    &quot;task_key&quot;: &quot;Orders_Ingest&quot;,</span>
<span class="sd">                    &quot;description&quot;: &quot;Ingests order data&quot;,</span>
<span class="sd">                    &quot;depends_on&quot;: [],</span>
<span class="sd">                    &quot;existing_cluster_id&quot;: &quot;0923-164208-meows279&quot;,</span>
<span class="sd">                    &quot;spark_jar_task&quot;: {</span>
<span class="sd">                        &quot;main_class_name&quot;: &quot;com.databricks.OrdersIngest&quot;,</span>
<span class="sd">                        &quot;parameters&quot;: [&quot;--data&quot;, &quot;dbfs:/path/to/order-data.json&quot;],</span>
<span class="sd">                    },</span>
<span class="sd">                    &quot;libraries&quot;: [{&quot;jar&quot;: &quot;dbfs:/mnt/databricks/OrderIngest.jar&quot;}],</span>
<span class="sd">                    &quot;timeout_seconds&quot;: 86400,</span>
<span class="sd">                },</span>
<span class="sd">                {</span>
<span class="sd">                    &quot;task_key&quot;: &quot;Match&quot;,</span>
<span class="sd">                    &quot;description&quot;: &quot;Matches orders with user sessions&quot;,</span>
<span class="sd">                    &quot;depends_on&quot;: [</span>
<span class="sd">                        {&quot;task_key&quot;: &quot;Orders_Ingest&quot;},</span>
<span class="sd">                        {&quot;task_key&quot;: &quot;Sessionize&quot;},</span>
<span class="sd">                    ],</span>
<span class="sd">                    &quot;new_cluster&quot;: {</span>
<span class="sd">                        &quot;spark_version&quot;: &quot;7.3.x-scala2.12&quot;,</span>
<span class="sd">                        &quot;node_type_id&quot;: &quot;i3.xlarge&quot;,</span>
<span class="sd">                        &quot;spark_conf&quot;: {&quot;spark.speculation&quot;: True},</span>
<span class="sd">                        &quot;aws_attributes&quot;: {</span>
<span class="sd">                            &quot;availability&quot;: &quot;SPOT&quot;,</span>
<span class="sd">                            &quot;zone_id&quot;: &quot;us-west-2a&quot;,</span>
<span class="sd">                        },</span>
<span class="sd">                        &quot;autoscale&quot;: {&quot;min_workers&quot;: 2, &quot;max_workers&quot;: 16},</span>
<span class="sd">                    },</span>
<span class="sd">                    &quot;notebook_task&quot;: {</span>
<span class="sd">                        &quot;notebook_path&quot;: &quot;/Users/user.name@databricks.com/Match&quot;,</span>
<span class="sd">                        &quot;base_parameters&quot;: {&quot;name&quot;: &quot;John Doe&quot;, &quot;age&quot;: &quot;35&quot;},</span>
<span class="sd">                    },</span>
<span class="sd">                    &quot;timeout_seconds&quot;: 86400,</span>
<span class="sd">                },</span>
<span class="sd">            ]</span>
<span class="sd">            ```</span>
<span class="sd">        run_name:</span>
<span class="sd">            An optional name for the run. The default value is `Untitled`, e.g. `A</span>
<span class="sd">            multitask job run`.</span>
<span class="sd">        git_source:</span>
<span class="sd">            This functionality is in Public Preview.  An optional specification for</span>
<span class="sd">            a remote repository containing the notebooks used by this</span>
<span class="sd">            job&#39;s notebook tasks. Key-values:</span>
<span class="sd">            - git_url:</span>
<span class="sd">                URL of the repository to be cloned by this job. The maximum</span>
<span class="sd">                length is 300 characters, e.g.</span>
<span class="sd">                `https://github.com/databricks/databricks-cli`.</span>
<span class="sd">            - git_provider:</span>
<span class="sd">                Unique identifier of the service used to host the Git</span>
<span class="sd">                repository. The value is case insensitive, e.g. `github`.</span>
<span class="sd">            - git_branch:</span>
<span class="sd">                Name of the branch to be checked out and used by this job.</span>
<span class="sd">                This field cannot be specified in conjunction with git_tag</span>
<span class="sd">                or git_commit. The maximum length is 255 characters, e.g.</span>
<span class="sd">                `main`.</span>
<span class="sd">            - git_tag:</span>
<span class="sd">                Name of the tag to be checked out and used by this job. This</span>
<span class="sd">                field cannot be specified in conjunction with git_branch or</span>
<span class="sd">                git_commit. The maximum length is 255 characters, e.g.</span>
<span class="sd">                `release-1.0.0`.</span>
<span class="sd">            - git_commit:</span>
<span class="sd">                Commit to be checked out and used by this job. This field</span>
<span class="sd">                cannot be specified in conjunction with git_branch or</span>
<span class="sd">                git_tag. The maximum length is 64 characters, e.g.</span>
<span class="sd">                `e0056d01`.</span>
<span class="sd">            - git_snapshot:</span>
<span class="sd">                Read-only state of the remote repository at the time the job was run.</span>
<span class="sd">                            This field is only included on job runs.</span>
<span class="sd">        timeout_seconds:</span>
<span class="sd">            An optional timeout applied to each run of this job. The default</span>
<span class="sd">            behavior is to have no timeout, e.g. `86400`.</span>
<span class="sd">        idempotency_token:</span>
<span class="sd">            An optional token that can be used to guarantee the idempotency of job</span>
<span class="sd">            run requests. If a run with the provided token already</span>
<span class="sd">            exists, the request does not create a new run but returns</span>
<span class="sd">            the ID of the existing run instead. If a run with the</span>
<span class="sd">            provided token is deleted, an error is returned.  If you</span>
<span class="sd">            specify the idempotency token, upon failure you can retry</span>
<span class="sd">            until the request succeeds. Databricks guarantees that</span>
<span class="sd">            exactly one run is launched with that idempotency token.</span>
<span class="sd">            This token must have at most 64 characters.  For more</span>
<span class="sd">            information, see [How to ensure idempotency for</span>
<span class="sd">            jobs](https://kb.databricks.com/jobs/jobs-idempotency.html),</span>
<span class="sd">            e.g. `8f018174-4792-40d5-bcbc-3e6a527352c8`.</span>
<span class="sd">        access_control_list:</span>
<span class="sd">            List of permissions to set on the job.</span>
<span class="sd">        max_wait_seconds: Maximum number of seconds to wait for the entire flow to complete.</span>
<span class="sd">        poll_frequency_seconds: Number of seconds to wait in between checks for</span>
<span class="sd">            run completion.</span>
<span class="sd">        **jobs_runs_submit_kwargs: Additional keyword arguments to pass to `jobs_runs_submit`.</span>
<span class="sd">    Returns:</span>
<span class="sd">        A dictionary of task keys to its corresponding notebook output.</span>
<span class="sd">    Examples:</span>
<span class="sd">        Submit jobs runs and wait.</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>
<span class="sd">        from prefect_databricks import DatabricksCredentials</span>
<span class="sd">        from prefect_databricks.flows import jobs_runs_submit_and_wait_for_completion</span>
<span class="sd">        from prefect_databricks.models.jobs import (</span>
<span class="sd">            AutoScale,</span>
<span class="sd">            AwsAttributes,</span>
<span class="sd">            JobTaskSettings,</span>
<span class="sd">            NotebookTask,</span>
<span class="sd">            NewCluster,</span>
<span class="sd">        )</span>
<span class="sd">        @flow</span>
<span class="sd">        def jobs_runs_submit_and_wait_for_completion_flow(notebook_path, **base_parameters):</span>
<span class="sd">            databricks_credentials = await DatabricksCredentials.load(&quot;BLOCK_NAME&quot;)</span>
<span class="sd">            # specify new cluster settings</span>
<span class="sd">            aws_attributes = AwsAttributes(</span>
<span class="sd">                availability=&quot;SPOT&quot;,</span>
<span class="sd">                zone_id=&quot;us-west-2a&quot;,</span>
<span class="sd">                ebs_volume_type=&quot;GENERAL_PURPOSE_SSD&quot;,</span>
<span class="sd">                ebs_volume_count=3,</span>
<span class="sd">                ebs_volume_size=100,</span>
<span class="sd">            )</span>
<span class="sd">            auto_scale = AutoScale(min_workers=1, max_workers=2)</span>
<span class="sd">            new_cluster = NewCluster(</span>
<span class="sd">                aws_attributes=aws_attributes,</span>
<span class="sd">                autoscale=auto_scale,</span>
<span class="sd">                node_type_id=&quot;m4.large&quot;,</span>
<span class="sd">                spark_version=&quot;10.4.x-scala2.12&quot;,</span>
<span class="sd">                spark_conf={&quot;spark.speculation&quot;: True},</span>
<span class="sd">            )</span>
<span class="sd">            # specify notebook to use and parameters to pass</span>
<span class="sd">            notebook_task = NotebookTask(</span>
<span class="sd">                notebook_path=notebook_path,</span>
<span class="sd">                base_parameters=base_parameters,</span>
<span class="sd">            )</span>
<span class="sd">            # compile job task settings</span>
<span class="sd">            job_task_settings = JobTaskSettings(</span>
<span class="sd">                new_cluster=new_cluster,</span>
<span class="sd">                notebook_task=notebook_task,</span>
<span class="sd">                task_key=&quot;prefect-task&quot;</span>
<span class="sd">            )</span>
<span class="sd">            multi_task_runs = jobs_runs_submit_and_wait_for_completion(</span>
<span class="sd">                databricks_credentials=databricks_credentials,</span>
<span class="sd">                run_name=&quot;prefect-job&quot;,</span>
<span class="sd">                tasks=[job_task_settings]</span>
<span class="sd">            )</span>
<span class="sd">            return multi_task_runs</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">get_run_logger</span><span class="p">()</span>

    <span class="c1"># submit the jobs runs</span>
    <span class="n">multi_task_jobs_runs_future</span> <span class="o">=</span> <span class="k">await</span> <span class="n">jobs_runs_submit</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span>
        <span class="n">databricks_credentials</span><span class="o">=</span><span class="n">databricks_credentials</span><span class="p">,</span>
        <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">,</span>
        <span class="n">run_name</span><span class="o">=</span><span class="n">run_name</span><span class="p">,</span>
        <span class="n">git_source</span><span class="o">=</span><span class="n">git_source</span><span class="p">,</span>
        <span class="n">timeout_seconds</span><span class="o">=</span><span class="n">timeout_seconds</span><span class="p">,</span>
        <span class="n">idempotency_token</span><span class="o">=</span><span class="n">idempotency_token</span><span class="p">,</span>
        <span class="n">access_control_list</span><span class="o">=</span><span class="n">access_control_list</span><span class="p">,</span>
        <span class="o">**</span><span class="n">jobs_runs_submit_kwargs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">multi_task_jobs_runs</span> <span class="o">=</span> <span class="k">await</span> <span class="n">multi_task_jobs_runs_future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
    <span class="n">multi_task_jobs_runs_id</span> <span class="o">=</span> <span class="n">multi_task_jobs_runs</span><span class="p">[</span><span class="s2">&quot;run_id&quot;</span><span class="p">]</span>

    <span class="c1"># wait for all the jobs runs to complete in a separate flow</span>
    <span class="c1"># for a cleaner radar interface</span>
    <span class="n">jobs_runs_state</span><span class="p">,</span> <span class="n">jobs_runs_metadata</span> <span class="o">=</span> <span class="k">await</span> <span class="n">jobs_runs_wait_for_completion</span><span class="p">(</span>
        <span class="n">multi_task_jobs_runs_id</span><span class="o">=</span><span class="n">multi_task_jobs_runs_id</span><span class="p">,</span>
        <span class="n">databricks_credentials</span><span class="o">=</span><span class="n">databricks_credentials</span><span class="p">,</span>
        <span class="n">run_name</span><span class="o">=</span><span class="n">run_name</span><span class="p">,</span>
        <span class="n">max_wait_seconds</span><span class="o">=</span><span class="n">max_wait_seconds</span><span class="p">,</span>
        <span class="n">poll_frequency_seconds</span><span class="o">=</span><span class="n">poll_frequency_seconds</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># fetch the state results</span>
    <span class="n">jobs_runs_life_cycle_state</span> <span class="o">=</span> <span class="n">jobs_runs_state</span><span class="p">[</span><span class="s2">&quot;life_cycle_state&quot;</span><span class="p">]</span>
    <span class="n">jobs_runs_state_message</span> <span class="o">=</span> <span class="n">jobs_runs_state</span><span class="p">[</span><span class="s2">&quot;state_message&quot;</span><span class="p">]</span>

    <span class="c1"># return results or raise error</span>
    <span class="k">if</span> <span class="n">jobs_runs_life_cycle_state</span> <span class="o">==</span> <span class="n">RunLifeCycleState</span><span class="o">.</span><span class="n">terminated</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="n">jobs_runs_result_state</span> <span class="o">=</span> <span class="n">jobs_runs_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;result_state&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">jobs_runs_result_state</span> <span class="o">==</span> <span class="n">RunResultState</span><span class="o">.</span><span class="n">success</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">task_notebook_outputs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">jobs_runs_metadata</span><span class="p">[</span><span class="s2">&quot;tasks&quot;</span><span class="p">]:</span>
                <span class="n">task_key</span> <span class="o">=</span> <span class="n">task</span><span class="p">[</span><span class="s2">&quot;task_key&quot;</span><span class="p">]</span>
                <span class="n">task_run_id</span> <span class="o">=</span> <span class="n">task</span><span class="p">[</span><span class="s2">&quot;run_id&quot;</span><span class="p">]</span>
                <span class="n">task_run_output_future</span> <span class="o">=</span> <span class="k">await</span> <span class="n">jobs_runs_get_output</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span>
                    <span class="n">run_id</span><span class="o">=</span><span class="n">task_run_id</span><span class="p">,</span>
                    <span class="n">databricks_credentials</span><span class="o">=</span><span class="n">databricks_credentials</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">task_run_output</span> <span class="o">=</span> <span class="k">await</span> <span class="n">task_run_output_future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
                <span class="n">task_run_notebook_output</span> <span class="o">=</span> <span class="n">task_run_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;notebook_output&quot;</span><span class="p">,</span> <span class="p">{})</span>
                <span class="n">task_notebook_outputs</span><span class="p">[</span><span class="n">task_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">task_run_notebook_output</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Databricks Jobs Runs Submit (</span><span class="si">%s</span><span class="s2"> ID </span><span class="si">%s</span><span class="s2">) completed successfully!&quot;</span><span class="p">,</span>
                <span class="n">run_name</span><span class="p">,</span>
                <span class="n">multi_task_jobs_runs_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">task_notebook_outputs</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DatabricksJobTerminated</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Databricks Jobs Runs Submit &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">run_name</span><span class="si">}</span><span class="s2"> ID </span><span class="si">{</span><span class="n">multi_task_jobs_runs_id</span><span class="si">}</span><span class="s2">) &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;terminated with result state, </span><span class="si">{</span><span class="n">jobs_runs_result_state</span><span class="si">}</span><span class="s2">: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">jobs_runs_state_message</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
    <span class="k">elif</span> <span class="n">jobs_runs_life_cycle_state</span> <span class="o">==</span> <span class="n">RunLifeCycleState</span><span class="o">.</span><span class="n">skipped</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DatabricksJobSkipped</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Databricks Jobs Runs Submit (</span><span class="si">{</span><span class="n">run_name</span><span class="si">}</span><span class="s2"> ID &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">multi_task_jobs_runs_id</span><span class="si">}</span><span class="s2">) was skipped: </span><span class="si">{</span><span class="n">jobs_runs_state_message</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">jobs_runs_life_cycle_state</span> <span class="o">==</span> <span class="n">RunLifeCycleState</span><span class="o">.</span><span class="n">internalerror</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DatabricksJobInternalError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Databricks Jobs Runs Submit (</span><span class="si">{</span><span class="n">run_name</span><span class="si">}</span><span class="s2"> ID &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">multi_task_jobs_runs_id</span><span class="si">}</span><span class="s2">) &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;encountered an internal error: </span><span class="si">{</span><span class="n">jobs_runs_state_message</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="prefect_databricks.flows.jobs_runs_submit_by_id_and_wait_for_completion" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">jobs_runs_submit_by_id_and_wait_for_completion</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>flow that triggers an existing job and waits for its completion</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>databricks_credentials</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_databricks.DatabricksCredentials" href="../credentials/#prefect_databricks.credentials.DatabricksCredentials">DatabricksCredentials</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Credentials to use for authentication with Databricks.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>job_id</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Id of the databricks job.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>idempotency_token</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An optional token that can be used to guarantee the idempotency of job
run requests. If a run with the provided token already
exists, the request does not create a new run but returns
the ID of the existing run instead. If a run with the
provided token is deleted, an error is returned.  If you
specify the idempotency token, upon failure you can retry
until the request succeeds. Databricks guarantees that
exactly one run is launched with that idempotency token.
This token must have at most 64 characters.  For more
information, see <a href="https://kb.databricks.com/jobs/jobs-idempotency.html">How to ensure idempotency for
jobs</a>,
e.g. <code>8f018174-4792-40d5-bcbc-3e6a527352c8</code>.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>jar_params</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of parameters for jobs with Spark JAR tasks, for example "jar_params"
: ["john doe", "35"]. The parameters are used to invoke the main function of
the main class specified in the Spark JAR task. If not specified upon run-
now, it defaults to an empty list. jar_params cannot be specified in
conjunction with notebook_params. The JSON representation of this field (for
example {"jar_params": ["john doe","35"]}) cannot exceed 10,000 bytes.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>max_wait_seconds</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Maximum number of seconds to wait for the entire flow to complete.</p>
            </div>
          </td>
          <td>
                <code>900</code>
          </td>
        </tr>
        <tr>
          <td><code>poll_frequency_seconds</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of seconds to wait in between checks for
run completion.</p>
            </div>
          </td>
          <td>
                <code>10</code>
          </td>
        </tr>
        <tr>
          <td><code>notebook_params</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A map from keys to values for jobs with notebook task, for example
"notebook_params": {"name": "john doe", "age": "35"}. The map is
passed to the notebook and is accessible through the dbutils.widgets.get
function. If not specified upon run-now, the triggered run uses the job’s
base parameters. notebook_params cannot be specified in conjunction with
jar_params. Use Task parameter variables to set parameters containing
information about job runs. The JSON representation of this field
(for example {"notebook_params":{"name":"john doe","age":"35"}}) cannot
exceed 10,000 bytes.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>python_params</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of parameters for jobs with Python tasks, for example "python_params"
:["john doe", "35"]. The parameters are passed to Python file as command-
line parameters. If specified upon run-now, it would overwrite the
parameters specified in job setting. The JSON representation of this field
(for example {"python_params":["john doe","35"]}) cannot exceed 10,000 bytes
Use Task parameter variables to set parameters containing information
about job runs. These parameters accept only Latin characters (ASCII
character set). Using non-ASCII characters returns an error. Examples of
invalid, non-ASCII characters are Chinese, Japanese kanjis, and emojis.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>spark_submit_params</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of parameters for jobs with spark submit task, for example
"spark_submit_params": ["--class", "org.apache.spark.examples.SparkPi"].
The parameters are passed to spark-submit script as command-line parameters.
If specified upon run-now, it would overwrite the parameters specified in
job setting. The JSON representation of this field (for example
{"python_params":["john doe","35"]}) cannot exceed 10,000 bytes.
Use Task parameter variables to set parameters containing information about
job runs. These parameters accept only Latin characters (ASCII character
set). Using non-ASCII characters returns an error. Examples of invalid,
non-ASCII characters are Chinese, Japanese kanjis, and emojis.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>python_named_params</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A map from keys to values for jobs with Python wheel task, for example
"python_named_params": {"name": "task", "data": "dbfs:/path/to/data.json"}.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>pipeline_params</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If <code>full_refresh</code> is set to true, trigger a full refresh on the
delta live table e.g.
<div class="highlight"><pre><span></span><code>    &quot;pipeline_params&quot;: {&quot;full_refresh&quot;: true}
</code></pre></div></p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>sql_params</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A map from keys to values for SQL tasks, for example "sql_params":
{"name": "john doe", "age": "35"}. The SQL alert task does not support
custom parameters.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>dbt_commands</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An array of commands to execute for jobs with the dbt task,
for example "dbt_commands": ["dbt deps", "dbt seed", "dbt run"]</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_databricks.flows.DatabricksJobTerminated" href="#prefect_databricks.flows.DatabricksJobTerminated">DatabricksJobTerminated</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Raised when the Databricks job run is terminated with a non-successful
result state.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_databricks.flows.DatabricksJobSkipped" href="#prefect_databricks.flows.DatabricksJobSkipped">DatabricksJobSkipped</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Raised when the Databricks job run is skipped.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_databricks.flows.DatabricksJobInternalError" href="#prefect_databricks.flows.DatabricksJobInternalError">DatabricksJobInternalError</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Raised when the Databricks job run encounters an internal error.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>Dict</code></td>          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dictionary containing information about the completed job run.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="kn">from</span> <span class="nn">prefect_databricks</span> <span class="kn">import</span> <span class="n">DatabricksCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_databricks.flows</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">jobs_runs_submit_by_id_and_wait_for_completion</span><span class="p">,</span>
<span class="p">)</span>


<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">submit_existing_job</span><span class="p">(</span><span class="n">block_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">job_id</span><span class="p">):</span>
    <span class="n">databricks_credentials</span> <span class="o">=</span> <span class="n">DatabricksCredentials</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">block_name</span><span class="p">)</span>

    <span class="n">run</span> <span class="o">=</span> <span class="n">jobs_runs_submit_by_id_and_wait_for_completion</span><span class="p">(</span>
        <span class="n">databricks_credentials</span><span class="o">=</span><span class="n">databricks_credentials</span><span class="p">,</span> <span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">run</span>


<span class="n">submit_existing_job</span><span class="p">(</span><span class="n">block_name</span><span class="o">=</span><span class="s2">&quot;db-creds&quot;</span><span class="p">,</span> <span class="n">job_id</span><span class="o">=</span><span class="n">db_job_id</span><span class="p">)</span>
</code></pre></div>
</details>
          <details class="quote">
            <summary>Source code in <code>prefect_databricks/flows.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@flow</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Submit existing job runs and wait for completion&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;Triggers a Databricks jobs runs and waits for the &quot;</span>
        <span class="s2">&quot;triggered runs to complete.&quot;</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">jobs_runs_submit_by_id_and_wait_for_completion</span><span class="p">(</span>
    <span class="n">databricks_credentials</span><span class="p">:</span> <span class="n">DatabricksCredentials</span><span class="p">,</span>
    <span class="n">job_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">idempotency_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">jar_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_wait_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">900</span><span class="p">,</span>
    <span class="n">poll_frequency_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">notebook_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">python_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">spark_submit_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">python_named_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">pipeline_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">sql_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dbt_commands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">jobs_runs_submit_kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;flow that triggers an existing job and waits for its completion</span>

<span class="sd">    Args:</span>
<span class="sd">        databricks_credentials: Credentials to use for authentication with Databricks.</span>
<span class="sd">        job_id: Id of the databricks job.</span>
<span class="sd">        idempotency_token:</span>
<span class="sd">            An optional token that can be used to guarantee the idempotency of job</span>
<span class="sd">            run requests. If a run with the provided token already</span>
<span class="sd">            exists, the request does not create a new run but returns</span>
<span class="sd">            the ID of the existing run instead. If a run with the</span>
<span class="sd">            provided token is deleted, an error is returned.  If you</span>
<span class="sd">            specify the idempotency token, upon failure you can retry</span>
<span class="sd">            until the request succeeds. Databricks guarantees that</span>
<span class="sd">            exactly one run is launched with that idempotency token.</span>
<span class="sd">            This token must have at most 64 characters.  For more</span>
<span class="sd">            information, see [How to ensure idempotency for</span>
<span class="sd">            jobs](https://kb.databricks.com/jobs/jobs-idempotency.html),</span>
<span class="sd">            e.g. `8f018174-4792-40d5-bcbc-3e6a527352c8`.</span>
<span class="sd">        jar_params:</span>
<span class="sd">            A list of parameters for jobs with Spark JAR tasks, for example &quot;jar_params&quot;</span>
<span class="sd">            : [&quot;john doe&quot;, &quot;35&quot;]. The parameters are used to invoke the main function of</span>
<span class="sd">            the main class specified in the Spark JAR task. If not specified upon run-</span>
<span class="sd">            now, it defaults to an empty list. jar_params cannot be specified in</span>
<span class="sd">            conjunction with notebook_params. The JSON representation of this field (for</span>
<span class="sd">            example {&quot;jar_params&quot;: [&quot;john doe&quot;,&quot;35&quot;]}) cannot exceed 10,000 bytes.</span>
<span class="sd">        max_wait_seconds:</span>
<span class="sd">            Maximum number of seconds to wait for the entire flow to complete.</span>
<span class="sd">        poll_frequency_seconds: Number of seconds to wait in between checks for</span>
<span class="sd">            run completion.</span>
<span class="sd">        notebook_params:</span>
<span class="sd">            A map from keys to values for jobs with notebook task, for example</span>
<span class="sd">            &quot;notebook_params&quot;: {&quot;name&quot;: &quot;john doe&quot;, &quot;age&quot;: &quot;35&quot;}. The map is</span>
<span class="sd">            passed to the notebook and is accessible through the dbutils.widgets.get</span>
<span class="sd">            function. If not specified upon run-now, the triggered run uses the job’s</span>
<span class="sd">            base parameters. notebook_params cannot be specified in conjunction with</span>
<span class="sd">            jar_params. Use Task parameter variables to set parameters containing</span>
<span class="sd">            information about job runs. The JSON representation of this field</span>
<span class="sd">            (for example {&quot;notebook_params&quot;:{&quot;name&quot;:&quot;john doe&quot;,&quot;age&quot;:&quot;35&quot;}}) cannot</span>
<span class="sd">            exceed 10,000 bytes.</span>
<span class="sd">        python_params:</span>
<span class="sd">            A list of parameters for jobs with Python tasks, for example &quot;python_params&quot;</span>
<span class="sd">            :[&quot;john doe&quot;, &quot;35&quot;]. The parameters are passed to Python file as command-</span>
<span class="sd">            line parameters. If specified upon run-now, it would overwrite the</span>
<span class="sd">            parameters specified in job setting. The JSON representation of this field</span>
<span class="sd">            (for example {&quot;python_params&quot;:[&quot;john doe&quot;,&quot;35&quot;]}) cannot exceed 10,000 bytes</span>
<span class="sd">            Use Task parameter variables to set parameters containing information</span>
<span class="sd">            about job runs. These parameters accept only Latin characters (ASCII</span>
<span class="sd">            character set). Using non-ASCII characters returns an error. Examples of</span>
<span class="sd">            invalid, non-ASCII characters are Chinese, Japanese kanjis, and emojis.</span>
<span class="sd">        spark_submit_params:</span>
<span class="sd">            A list of parameters for jobs with spark submit task, for example</span>
<span class="sd">            &quot;spark_submit_params&quot;: [&quot;--class&quot;, &quot;org.apache.spark.examples.SparkPi&quot;].</span>
<span class="sd">            The parameters are passed to spark-submit script as command-line parameters.</span>
<span class="sd">            If specified upon run-now, it would overwrite the parameters specified in</span>
<span class="sd">            job setting. The JSON representation of this field (for example</span>
<span class="sd">            {&quot;python_params&quot;:[&quot;john doe&quot;,&quot;35&quot;]}) cannot exceed 10,000 bytes.</span>
<span class="sd">            Use Task parameter variables to set parameters containing information about</span>
<span class="sd">            job runs. These parameters accept only Latin characters (ASCII character</span>
<span class="sd">            set). Using non-ASCII characters returns an error. Examples of invalid,</span>
<span class="sd">            non-ASCII characters are Chinese, Japanese kanjis, and emojis.</span>
<span class="sd">        python_named_params:</span>
<span class="sd">            A map from keys to values for jobs with Python wheel task, for example</span>
<span class="sd">            &quot;python_named_params&quot;: {&quot;name&quot;: &quot;task&quot;, &quot;data&quot;: &quot;dbfs:/path/to/data.json&quot;}.</span>
<span class="sd">        pipeline_params:</span>
<span class="sd">            If `full_refresh` is set to true, trigger a full refresh on the</span>
<span class="sd">            delta live table e.g.</span>
<span class="sd">            ```</span>
<span class="sd">                &quot;pipeline_params&quot;: {&quot;full_refresh&quot;: true}</span>
<span class="sd">            ```</span>
<span class="sd">        sql_params:</span>
<span class="sd">            A map from keys to values for SQL tasks, for example &quot;sql_params&quot;:</span>
<span class="sd">            {&quot;name&quot;: &quot;john doe&quot;, &quot;age&quot;: &quot;35&quot;}. The SQL alert task does not support</span>
<span class="sd">            custom parameters.</span>
<span class="sd">        dbt_commands:</span>
<span class="sd">            An array of commands to execute for jobs with the dbt task,</span>
<span class="sd">            for example &quot;dbt_commands&quot;: [&quot;dbt deps&quot;, &quot;dbt seed&quot;, &quot;dbt run&quot;]</span>

<span class="sd">    Raises:</span>
<span class="sd">        DatabricksJobTerminated:</span>
<span class="sd">            Raised when the Databricks job run is terminated with a non-successful</span>
<span class="sd">            result state.</span>
<span class="sd">        DatabricksJobSkipped: Raised when the Databricks job run is skipped.</span>
<span class="sd">        DatabricksJobInternalError:</span>
<span class="sd">            Raised when the Databricks job run encounters an internal error.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict: A dictionary containing information about the completed job run.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>
<span class="sd">        from prefect_databricks import DatabricksCredentials</span>
<span class="sd">        from prefect_databricks.flows import (</span>
<span class="sd">            jobs_runs_submit_by_id_and_wait_for_completion,</span>
<span class="sd">        )</span>


<span class="sd">        @flow</span>
<span class="sd">        def submit_existing_job(block_name: str, job_id):</span>
<span class="sd">            databricks_credentials = DatabricksCredentials.load(block_name)</span>

<span class="sd">            run = jobs_runs_submit_by_id_and_wait_for_completion(</span>
<span class="sd">                databricks_credentials=databricks_credentials, job_id=job_id</span>
<span class="sd">            )</span>

<span class="sd">            return run</span>


<span class="sd">        submit_existing_job(block_name=&quot;db-creds&quot;, job_id=db_job_id)</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">get_run_logger</span><span class="p">()</span>

    <span class="c1"># submit the jobs runs</span>

    <span class="n">jobs_runs_future</span> <span class="o">=</span> <span class="k">await</span> <span class="n">jobs_run_now</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span>
        <span class="n">databricks_credentials</span><span class="o">=</span><span class="n">databricks_credentials</span><span class="p">,</span>
        <span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span>
        <span class="n">idempotency_token</span><span class="o">=</span><span class="n">idempotency_token</span><span class="p">,</span>
        <span class="n">jar_params</span><span class="o">=</span><span class="n">jar_params</span><span class="p">,</span>
        <span class="n">notebook_params</span><span class="o">=</span><span class="n">notebook_params</span><span class="p">,</span>
        <span class="n">python_params</span><span class="o">=</span><span class="n">python_params</span><span class="p">,</span>
        <span class="n">spark_submit_params</span><span class="o">=</span><span class="n">spark_submit_params</span><span class="p">,</span>
        <span class="n">python_named_params</span><span class="o">=</span><span class="n">python_named_params</span><span class="p">,</span>
        <span class="n">pipeline_params</span><span class="o">=</span><span class="n">pipeline_params</span><span class="p">,</span>
        <span class="n">sql_params</span><span class="o">=</span><span class="n">sql_params</span><span class="p">,</span>
        <span class="n">dbt_commands</span><span class="o">=</span><span class="n">dbt_commands</span><span class="p">,</span>
        <span class="o">**</span><span class="n">jobs_runs_submit_kwargs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">jobs_runs</span> <span class="o">=</span> <span class="k">await</span> <span class="n">jobs_runs_future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
    <span class="n">job_run_id</span> <span class="o">=</span> <span class="n">jobs_runs</span><span class="p">[</span><span class="s2">&quot;run_id&quot;</span><span class="p">]</span>

    <span class="c1"># wait for all the jobs runs to complete in a separate flow</span>
    <span class="c1"># for a cleaner radar interface</span>
    <span class="n">jobs_runs_state</span><span class="p">,</span> <span class="n">jobs_runs_metadata</span> <span class="o">=</span> <span class="k">await</span> <span class="n">jobs_runs_wait_for_completion</span><span class="p">(</span>
        <span class="n">multi_task_jobs_runs_id</span><span class="o">=</span><span class="n">job_run_id</span><span class="p">,</span>
        <span class="n">databricks_credentials</span><span class="o">=</span><span class="n">databricks_credentials</span><span class="p">,</span>
        <span class="n">max_wait_seconds</span><span class="o">=</span><span class="n">max_wait_seconds</span><span class="p">,</span>
        <span class="n">poll_frequency_seconds</span><span class="o">=</span><span class="n">poll_frequency_seconds</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># fetch the state results</span>
    <span class="n">jobs_runs_life_cycle_state</span> <span class="o">=</span> <span class="n">jobs_runs_state</span><span class="p">[</span><span class="s2">&quot;life_cycle_state&quot;</span><span class="p">]</span>
    <span class="n">jobs_runs_state_message</span> <span class="o">=</span> <span class="n">jobs_runs_state</span><span class="p">[</span><span class="s2">&quot;state_message&quot;</span><span class="p">]</span>

    <span class="c1"># return results or raise error</span>
    <span class="k">if</span> <span class="n">jobs_runs_life_cycle_state</span> <span class="o">==</span> <span class="n">RunLifeCycleState</span><span class="o">.</span><span class="n">terminated</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="n">jobs_runs_result_state</span> <span class="o">=</span> <span class="n">jobs_runs_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;result_state&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">jobs_runs_result_state</span> <span class="o">==</span> <span class="n">RunResultState</span><span class="o">.</span><span class="n">success</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">task_notebook_outputs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">jobs_runs_metadata</span><span class="p">[</span><span class="s2">&quot;tasks&quot;</span><span class="p">]:</span>
                <span class="n">task_key</span> <span class="o">=</span> <span class="n">task</span><span class="p">[</span><span class="s2">&quot;task_key&quot;</span><span class="p">]</span>
                <span class="n">task_run_id</span> <span class="o">=</span> <span class="n">task</span><span class="p">[</span><span class="s2">&quot;run_id&quot;</span><span class="p">]</span>
                <span class="n">task_run_output_future</span> <span class="o">=</span> <span class="k">await</span> <span class="n">jobs_runs_get_output</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span>
                    <span class="n">run_id</span><span class="o">=</span><span class="n">task_run_id</span><span class="p">,</span>
                    <span class="n">databricks_credentials</span><span class="o">=</span><span class="n">databricks_credentials</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">task_run_output</span> <span class="o">=</span> <span class="k">await</span> <span class="n">task_run_output_future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
                <span class="n">task_run_notebook_output</span> <span class="o">=</span> <span class="n">task_run_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;notebook_output&quot;</span><span class="p">,</span> <span class="p">{})</span>
                <span class="n">task_notebook_outputs</span><span class="p">[</span><span class="n">task_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">task_run_notebook_output</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Databricks Jobs Runs Submit </span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> completed successfully!&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">task_notebook_outputs</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DatabricksJobTerminated</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Databricks Jobs Runs Submit ID </span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;terminated with result state, </span><span class="si">{</span><span class="n">jobs_runs_result_state</span><span class="si">}</span><span class="s2">: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">jobs_runs_state_message</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
    <span class="k">elif</span> <span class="n">jobs_runs_life_cycle_state</span> <span class="o">==</span> <span class="n">RunLifeCycleState</span><span class="o">.</span><span class="n">skipped</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DatabricksJobSkipped</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Databricks Jobs Runs Submit ID &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> was skipped: </span><span class="si">{</span><span class="n">jobs_runs_state_message</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">jobs_runs_life_cycle_state</span> <span class="o">==</span> <span class="n">RunLifeCycleState</span><span class="o">.</span><span class="n">internalerror</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DatabricksJobInternalError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Databricks Jobs Runs Submit ID &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;encountered an internal error: </span><span class="si">{</span><span class="n">jobs_runs_state_message</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="prefect_databricks.flows.jobs_runs_wait_for_completion" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">jobs_runs_wait_for_completion</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Flow that triggers a job run and waits for the triggered run to complete.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>run_name</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the jobs runs task.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>multi_task_jobs_run_id</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The ID of the jobs runs task to watch.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>databricks_credentials</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="prefect_databricks.DatabricksCredentials" href="../credentials/#prefect_databricks.credentials.DatabricksCredentials">DatabricksCredentials</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Credentials to use for authentication with Databricks.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>max_wait_seconds</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Maximum number of seconds to wait for the entire flow to complete.</p>
            </div>
          </td>
          <td>
                <code>900</code>
          </td>
        </tr>
        <tr>
          <td><code>poll_frequency_seconds</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of seconds to wait in between checks for
run completion.</p>
            </div>
          </td>
          <td>
                <code>10</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>jobs_runs_state</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dict containing the jobs runs life cycle state and message.</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>jobs_runs_metadata</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dict containing IDs of the jobs runs tasks.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="example" open>
  <summary>Example</summary>
  <p>Waits for completion on jobs runs.
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="kn">from</span> <span class="nn">prefect_databricks</span> <span class="kn">import</span> <span class="n">DatabricksCredentials</span>
<span class="kn">from</span> <span class="nn">prefect_databricks.flows</span> <span class="kn">import</span> <span class="n">jobs_runs_wait_for_completion</span>

<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">jobs_runs_wait_for_completion_flow</span><span class="p">():</span>
    <span class="n">databricks_credentials</span> <span class="o">=</span> <span class="n">DatabricksCredentials</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;BLOCK_NAME&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jobs_runs_wait_for_completion</span><span class="p">(</span>
        <span class="n">multi_task_jobs_run_id</span><span class="o">=</span><span class="mi">45429</span><span class="p">,</span>
        <span class="n">databricks_credentials</span><span class="o">=</span><span class="n">databricks_credentials</span><span class="p">,</span>
        <span class="n">run_name</span><span class="o">=</span><span class="s2">&quot;my_run_name&quot;</span><span class="p">,</span>
        <span class="n">max_wait_seconds</span><span class="o">=</span><span class="mi">1800</span><span class="p">,</span>  <span class="c1"># 30 minutes</span>
        <span class="n">poll_frequency_seconds</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span>  <span class="c1"># 2 minutes</span>
    <span class="p">)</span>
</code></pre></div></p>
</details>
          <details class="quote">
            <summary>Source code in <code>prefect_databricks/flows.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@flow</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Wait for completion of jobs runs&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Waits for the jobs runs to finish running&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">jobs_runs_wait_for_completion</span><span class="p">(</span>
    <span class="n">multi_task_jobs_runs_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">databricks_credentials</span><span class="p">:</span> <span class="n">DatabricksCredentials</span><span class="p">,</span>
    <span class="n">run_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_wait_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">900</span><span class="p">,</span>
    <span class="n">poll_frequency_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Flow that triggers a job run and waits for the triggered run to complete.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_name: The name of the jobs runs task.</span>
<span class="sd">        multi_task_jobs_run_id: The ID of the jobs runs task to watch.</span>
<span class="sd">        databricks_credentials:</span>
<span class="sd">            Credentials to use for authentication with Databricks.</span>
<span class="sd">        max_wait_seconds:</span>
<span class="sd">            Maximum number of seconds to wait for the entire flow to complete.</span>
<span class="sd">        poll_frequency_seconds: Number of seconds to wait in between checks for</span>
<span class="sd">            run completion.</span>

<span class="sd">    Returns:</span>
<span class="sd">        jobs_runs_state: A dict containing the jobs runs life cycle state and message.</span>
<span class="sd">        jobs_runs_metadata: A dict containing IDs of the jobs runs tasks.</span>

<span class="sd">    Example:</span>
<span class="sd">        Waits for completion on jobs runs.</span>
<span class="sd">        ```python</span>
<span class="sd">        from prefect import flow</span>
<span class="sd">        from prefect_databricks import DatabricksCredentials</span>
<span class="sd">        from prefect_databricks.flows import jobs_runs_wait_for_completion</span>

<span class="sd">        @flow</span>
<span class="sd">        def jobs_runs_wait_for_completion_flow():</span>
<span class="sd">            databricks_credentials = DatabricksCredentials.load(&quot;BLOCK_NAME&quot;)</span>
<span class="sd">            return jobs_runs_wait_for_completion(</span>
<span class="sd">                multi_task_jobs_run_id=45429,</span>
<span class="sd">                databricks_credentials=databricks_credentials,</span>
<span class="sd">                run_name=&quot;my_run_name&quot;,</span>
<span class="sd">                max_wait_seconds=1800,  # 30 minutes</span>
<span class="sd">                poll_frequency_seconds=120,  # 2 minutes</span>
<span class="sd">            )</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">get_run_logger</span><span class="p">()</span>

    <span class="n">seconds_waited_for_run_completion</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wait_for</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">jobs_status</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">tasks_status</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">while</span> <span class="n">seconds_waited_for_run_completion</span> <span class="o">&lt;=</span> <span class="n">max_wait_seconds</span><span class="p">:</span>
        <span class="n">jobs_runs_metadata_future</span> <span class="o">=</span> <span class="k">await</span> <span class="n">jobs_runs_get</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span>
            <span class="n">run_id</span><span class="o">=</span><span class="n">multi_task_jobs_runs_id</span><span class="p">,</span>
            <span class="n">databricks_credentials</span><span class="o">=</span><span class="n">databricks_credentials</span><span class="p">,</span>
            <span class="n">wait_for</span><span class="o">=</span><span class="n">wait_for</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">wait_for</span> <span class="o">=</span> <span class="p">[</span><span class="n">jobs_runs_metadata_future</span><span class="p">]</span>

        <span class="n">jobs_runs_metadata</span> <span class="o">=</span> <span class="k">await</span> <span class="n">jobs_runs_metadata_future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
        <span class="n">jobs_status</span> <span class="o">=</span> <span class="n">_update_and_log_state_changes</span><span class="p">(</span>
            <span class="n">jobs_status</span><span class="p">,</span> <span class="n">jobs_runs_metadata</span><span class="p">,</span> <span class="n">logger</span><span class="p">,</span> <span class="s2">&quot;Job&quot;</span>
        <span class="p">)</span>
        <span class="n">jobs_runs_metadata_tasks</span> <span class="o">=</span> <span class="n">jobs_runs_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tasks&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">for</span> <span class="n">task_metadata</span> <span class="ow">in</span> <span class="n">jobs_runs_metadata_tasks</span><span class="p">:</span>
            <span class="n">tasks_status</span> <span class="o">=</span> <span class="n">_update_and_log_state_changes</span><span class="p">(</span>
                <span class="n">tasks_status</span><span class="p">,</span> <span class="n">task_metadata</span><span class="p">,</span> <span class="n">logger</span><span class="p">,</span> <span class="s2">&quot;Task&quot;</span>
            <span class="p">)</span>

        <span class="n">jobs_runs_state</span> <span class="o">=</span> <span class="n">jobs_runs_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">jobs_runs_life_cycle_state</span> <span class="o">=</span> <span class="n">jobs_runs_state</span><span class="p">[</span><span class="s2">&quot;life_cycle_state&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">jobs_runs_life_cycle_state</span> <span class="ow">in</span> <span class="n">TERMINAL_STATUS_CODES</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">jobs_runs_state</span><span class="p">,</span> <span class="n">jobs_runs_metadata</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Waiting for </span><span class="si">%s</span><span class="s2"> seconds.&quot;</span><span class="p">,</span> <span class="n">poll_frequency_seconds</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">poll_frequency_seconds</span><span class="p">)</span>
        <span class="n">seconds_waited_for_run_completion</span> <span class="o">+=</span> <span class="n">poll_frequency_seconds</span>

    <span class="k">raise</span> <span class="n">DatabricksJobRunTimedOut</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Max wait time of </span><span class="si">{</span><span class="n">max_wait_seconds</span><span class="si">}</span><span class="s2"> seconds exceeded while waiting &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;for job run (</span><span class="si">{</span><span class="n">run_name</span><span class="si">}</span><span class="s2"> ID </span><span class="si">{</span><span class="n">multi_task_jobs_runs_id</span><span class="si">}</span><span class="s2">)&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.prefect.io/slack/" target="_blank" rel="noopener" title="www.prefect.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://discourse.prefect.io/" target="_blank" rel="noopener" title="discourse.prefect.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9C448 134.3 348.6 32 225.9 32zM224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/c/PrefectIO/videos" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://prefect.io/guide/" target="_blank" rel="noopener" title="prefect.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M168 80c-13.3 0-24 10.7-24 24v304c0 8.4-1.4 16.5-4.1 24H440c13.3 0 24-10.7 24-24V104c0-13.3-10.7-24-24-24H168zM72 480c-39.8 0-72-32.2-72-72V112c0-13.3 10.7-24 24-24s24 10.7 24 24v296c0 13.3 10.7 24 24 24s24-10.7 24-24V104c0-39.8 32.2-72 72-72h272c39.8 0 72 32.2 72 72v304c0 39.8-32.2 72-72 72H72zm104-344c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24h-96c-13.3 0-24-10.7-24-24v-80zm200-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24s10.7-24 24-24zm-176 80h208c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h208c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/PrefectIO" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/prefect/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/PrefectHQ/prefect" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/r/prefecthq/prefect/" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/prefect/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.94c44541.min.js"></script>
      
    
  </body>
</html>